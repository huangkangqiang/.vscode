!function($){function DragRowSelectionModel(){function init(grid){_grid=grid,_grid.onActiveCellChanged.subscribe(handleActiveCellChange),_grid.onKeyDown.subscribe(handleKeyDown),_grid.onClick.subscribe(handleClick),_grid.onDrag.subscribe(handleDrag),_grid.onDragInit.subscribe(handleDragInit),_grid.onDragStart.subscribe(handleDragStart),_grid.onDragEnd.subscribe(handleDragEnd),_grid.onHeaderClick.subscribe(handleHeaderClick),_grid.onColumnsResized.subscribe(handleColumnsResized)}function destroy(){_grid.onActiveCellChanged.unsubscribe(handleActiveCellChange),_grid.onKeyDown.unsubscribe(handleKeyDown),_grid.onClick.unsubscribe(handleClick),_grid.onDrag.unsubscribe(handleDrag),_grid.onDragInit.unsubscribe(handleDragInit),_grid.onDragStart.unsubscribe(handleDragStart),_grid.onDragEnd.unsubscribe(handleDragEnd),_grid.onHeaderClick.unsubscribe(handleHeaderClick),_grid.onColumnsResized.unsubscribe(handleColumnsResized)}function rangesToRows(ranges){for(var rows=[],i=0;i<ranges.length;i++)for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++)rows.push(j);return rows}function rowsToRanges(rows){for(var ranges=[],lastCell=_grid.getColumns().length-1,i=0;i<rows.length;i++)ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell));return ranges}function getSelectedRows(){return rangesToRows(_ranges)}function setSelectedRows(rows){setSelectedRanges(rowsToRanges(rows))}function setSelectedRanges(ranges){_ranges=ranges,_self.onSelectedRangesChanged.notify(_ranges)}function getSelectedRanges(){return _ranges}function handleActiveCellChange(e,data){}function isNavigationKey(e){switch(e.which){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.LEFT:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:return!0;default:return!1}}function navigateLeft(e,activeCell){if(activeCell.cell>1){var isHome=e.which==$.ui.keyCode.HOME,newActiveCellColumn=isHome?1:activeCell.cell-1,newRangeColumn=newActiveCellColumn-1;if(e.shiftKey){var last=_ranges.pop();last.fromCell<=newRangeColumn&&(last.toCell-=1);var fromRow=Math.min(activeCell.row,last.fromRow),fromCell=Math.min(newRangeColumn,last.fromCell),toRow=Math.max(activeCell.row,last.toRow),toCell=Math.max(newRangeColumn,last.toCell);_ranges=[new Slick.Range(fromRow,fromCell,toRow,toCell)]}else _ranges=[new Slick.Range(activeCell.row,newRangeColumn,activeCell.row,newRangeColumn)];_grid.setActiveCell(activeCell.row,newActiveCellColumn),setSelectedRanges(_ranges)}}function navigateRight(e,activeCell){var columnLength=_grid.getColumns().length;if(activeCell.cell<columnLength){var isEnd=e.which==$.ui.keyCode.END,newActiveCellColumn=isEnd?columnLength:activeCell.cell+1,newRangeColumn=newActiveCellColumn-1;if(e.shiftKey){var last=_ranges.pop();newRangeColumn<=last.toCell&&(last.fromCell+=1);var fromRow=Math.min(activeCell.row,last.fromRow),fromCell=Math.min(newRangeColumn,last.fromCell),toRow=Math.max(activeCell.row,last.toRow),toCell=Math.max(newRangeColumn,last.toCell);_ranges=[new Slick.Range(fromRow,fromCell,toRow,toCell)]}else _ranges=[new Slick.Range(activeCell.row,newRangeColumn,activeCell.row,newRangeColumn)];_grid.setActiveCell(activeCell.row,newActiveCellColumn),setSelectedRanges(_ranges)}}function handleKeyDown(e){var activeCell=_grid.getActiveCell();if(activeCell&&isNavigationKey(e)){if(e.stopImmediatePropagation(),e.ctrlKey||e.metaKey){var event=new CustomEvent("gridnav",{detail:{which:e.which,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey}});return void window.dispatchEvent(event)}if(e.which==$.ui.keyCode.END&&navigateRight(e,activeCell),e.which==$.ui.keyCode.HOME&&navigateLeft(e,activeCell),e.which==$.ui.keyCode.LEFT)if((e.ctrlKey||e.metaKey)&&e.shiftKey){var allColumns=JSON.parse(JSON.stringify(_grid.getColumns()));allColumns[activeCell.cell-1].width=allColumns[activeCell.cell-1].width-keyColResizeIncr,_grid.setColumns(allColumns)}else navigateLeft(e,activeCell);else if(e.which==$.ui.keyCode.UP&&activeCell.row>0){if(e.shiftKey){var last=_ranges.pop(),newRangeRow=activeCell.row-1;last.fromRow<=newRangeRow&&(last.toRow-=1);var fromRow=Math.min(activeCell.row-1,last.fromRow),fromCell=Math.min(activeCell.cell-1,last.fromCell),toRow=Math.max(newRangeRow,last.toRow),toCell=Math.max(activeCell.cell-1,last.toCell);_ranges=[new Slick.Range(fromRow,fromCell,toRow,toCell)]}else _ranges=[new Slick.Range(activeCell.row-1,activeCell.cell-1,activeCell.row-1,activeCell.cell-1)];_grid.setActiveCell(activeCell.row-1,activeCell.cell),setSelectedRanges(_ranges)}else if(e.which==$.ui.keyCode.RIGHT)if((e.ctrlKey||e.metaKey)&&e.shiftKey){var allColumns=JSON.parse(JSON.stringify(_grid.getColumns()));allColumns[activeCell.cell-1].width=allColumns[activeCell.cell-1].width+keyColResizeIncr,_grid.setColumns(allColumns)}else navigateRight(e,activeCell);else if(e.which==$.ui.keyCode.DOWN&&activeCell.row<_grid.getDataLength()-1){if(e.shiftKey){var last=_ranges.pop(),newRangeRow=activeCell.row+1;newRangeRow<=last.toRow&&(last.fromRow+=1);var fromRow=Math.min(activeCell.row+1,last.fromRow),fromCell=Math.min(activeCell.cell-1,last.fromCell),toRow=Math.max(activeCell.row+1,last.toRow),toCell=Math.max(activeCell.cell-1,last.toCell);_ranges=[new Slick.Range(fromRow,fromCell,toRow,toCell)]}else _ranges=[new Slick.Range(activeCell.row+1,activeCell.cell-1,activeCell.row+1,activeCell.cell-1)];_grid.setActiveCell(activeCell.row+1,activeCell.cell),setSelectedRanges(_ranges)}}}function handleColumnsResized(e,args){_columnResized=!0,setTimeout(function(){_columnResized=!1},10)}function handleHeaderClick(e,args){if(_columnResized)return _columnResized=!1,!0;var columnIndex=_grid.getColumnIndex(args.column.id);if(e.ctrlKey||e.metaKey)_ranges.push(new Slick.Range(0,columnIndex,_grid.getDataLength()-1,columnIndex));else if(e.shiftKey&&_ranges.length){var last=_ranges.pop().fromCell,from=Math.min(columnIndex,last),to=Math.max(columnIndex,last);_ranges=[];for(var i=from;i<=to;i++)i!==last&&_ranges.push(new Slick.Range(0,i,_grid.getDataLength()-1,i));_ranges.push(new Slick.Range(0,last,_grid.getDataLength()-1,last))}else _ranges=[new Slick.Range(0,columnIndex,_grid.getDataLength()-1,columnIndex)];return _grid.resetActiveCell(),setSelectedRanges(_ranges),e.stopImmediatePropagation(),!0}function handleClick(e){var cell=_grid.getCellFromEvent(e);if(!cell||!_grid.canCellBeActive(cell.row,cell.cell))return!1;if(!(e.ctrlKey||e.shiftKey||e.metaKey))return 0!==cell.cell?(_ranges=[new Slick.Range(cell.row,cell.cell-1,cell.row,cell.cell-1)],setSelectedRanges(_ranges),_grid.setActiveCell(cell.row,cell.cell),!0):(_ranges=[new Slick.Range(cell.row,0,cell.row,_grid.getColumns().length-1)],setSelectedRanges(_ranges),_grid.setActiveCell(cell.row,1),!0);if(_grid.getOptions().multiSelect)if(e.ctrlKey||e.metaKey)0===cell.cell?(_ranges.push(new Slick.Range(cell.row,0,cell.row,_grid.getColumns().length-1)),_grid.setActiveCell(cell.row,1)):(_ranges.push(new Slick.Range(cell.row,cell.cell-1,cell.row,cell.cell-1)),_grid.setActiveCell(cell.row,cell.cell));else if(_ranges.length&&e.shiftKey){var last=_ranges.pop();if(0===cell.cell){var fromRow=Math.min(cell.row,last.fromRow),toRow=Math.max(cell.row,last.fromRow);_ranges=[new Slick.Range(fromRow,0,toRow,_grid.getColumns().length-1)]}else{var fromRow=Math.min(cell.row,last.fromRow),fromCell=Math.min(cell.cell-1,last.fromCell),toRow=Math.max(cell.row,last.toRow),toCell=Math.max(cell.cell-1,last.toCell);_ranges=[new Slick.Range(fromRow,fromCell,toRow,toCell)]}}return setSelectedRanges(_ranges),!0}function handleDragInit(e){e.stopImmediatePropagation()}function handleDragStart(e){var cell=_grid.getCellFromEvent(e);if(e.stopImmediatePropagation(),_dragging=!0,e.ctrlKey||e.metaKey)_ranges.push(new Slick.Range),_grid.setActiveCell(cell.row,cell.cell);else if(_ranges.length&&e.shiftKey){var last=_ranges.pop(),fromRow=Math.min(cell.row,last.fromRow),fromCell=Math.min(cell.cell-1,last.fromCell),toRow=Math.max(cell.row,last.toRow),toCell=Math.max(cell.cell-1,last.toCell);_ranges=[new Slick.Range(fromRow,fromCell,toRow,toCell)]}else _ranges=[new Slick.Range],_grid.setActiveCell(cell.row,cell.cell);setSelectedRanges(_ranges)}function handleDrag(e){if(_dragging){var cell=_grid.getCellFromEvent(e),activeCell=_grid.getActiveCell();if(!cell||!_grid.canCellBeActive(cell.row,cell.cell))return!1;if(_ranges.pop(),0===activeCell.cell){var lastCell=_grid.getColumns().length-1,firstRow=Math.min(cell.row,activeCell.row),lastRow=Math.max(cell.row,activeCell.row);_ranges.push(new Slick.Range(firstRow,0,lastRow,lastCell))}else{var firstRow=Math.min(cell.row,activeCell.row),lastRow=Math.max(cell.row,activeCell.row),firstColumn=Math.min(cell.cell-1,activeCell.cell-1),lastColumn=Math.max(cell.cell-1,activeCell.cell-1);_ranges.push(new Slick.Range(firstRow,firstColumn,lastRow,lastColumn))}setSelectedRanges(_ranges)}}function handleDragEnd(e){_dragging=!1}const keyColResizeIncr=5;var _grid,_ranges=[],_self=this,_dragging=!1,_columnResized=!1;$.extend(this,{getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,getSelectedRanges:getSelectedRanges,setSelectedRanges:setSelectedRanges,init:init,destroy:destroy,onSelectedRangesChanged:new Slick.Event})}$.extend(!0,window,{Slick:{DragRowSelectionModel:DragRowSelectionModel}})}(jQuery);
//# sourceMappingURL=slick.dragrowselector.js.map
