!function($){function AutoColumnSize(maxWidth){function init(_grid){grid=_grid,maxWidth=maxWidth||200,$container=$(grid.getContainerNode()),$container.on("dblclick.autosize",".slick-resizable-handle",reSizeColumn),context=document.createElement("canvas").getContext("2d")}function destroy(){$container.off()}function reSizeColumn(e){var headerEl=$(e.currentTarget).closest(".slick-header-column"),columnDef=headerEl.data("column");if(columnDef&&columnDef.resizable){e.preventDefault(),e.stopPropagation();var headerWidth=getElementWidth(headerEl[0]),colIndex=grid.getColumnIndex(columnDef.id),origCols=grid.getColumns(),allColumns=JSON.parse(JSON.stringify(origCols));for(let[index,col]of allColumns.entries())col.formatter=origCols[index].formatter,col.asyncPostRender=origCols[index].asyncPostRender;var column=allColumns[colIndex],autoSizeWidth=Math.max(headerWidth,getMaxColumnTextWidth(columnDef,colIndex))+1;autoSizeWidth!==column.width&&(allColumns[colIndex].width=autoSizeWidth,grid.setColumns(allColumns),grid.onColumnsResized.notify())}}function getMaxColumnTextWidth(columnDef,colIndex){for(var texts=[],rowEl=createRow(columnDef),data=grid.getData(),viewPort=(grid.getColumns().length,grid.getViewport()),start=Math.max(0,viewPort.top+1),end=Math.min(data.getLength(),viewPort.bottom),i=start;i<end;i++)texts.push(data.getItem(i)[columnDef.field]);var template=getMaxTextTemplate(texts,columnDef,colIndex,data,rowEl),width=getTemplateWidth(rowEl,template);return deleteRow(rowEl),width}function getTemplateWidth(rowEl,template){var cell=$(rowEl.find(".slick-cell"));return cell.append(template),$(cell).find("*").css("position","relative"),cell.outerWidth()+1}function getMaxTextTemplate(texts,columnDef,colIndex,data,rowEl){var max=0,maxTemplate=null,formatFun=columnDef.formatter;return $(texts).each(function(index,text){var template;formatFun&&(template=$("<span>"+formatFun(index,colIndex,text,columnDef,data[index])+"</span>"),text=template.text()||text);var length=text?getElementWidthUsingCanvas(rowEl,text):0;length>max&&(max=length,maxTemplate=template||text)}),maxTemplate}function createRow(columnDef){var rowEl=$('<div class="slick-row"><div class="slick-cell"></div></div>');rowEl.find(".slick-cell").css({visibility:"hidden","text-overflow":"initial","white-space":"nowrap"});var gridCanvas=$container.find(".grid-canvas");return $(gridCanvas).append(rowEl),rowEl}function deleteRow(rowEl){$(rowEl).remove()}function getElementWidth(element){var width,clone=element.cloneNode(!0);return clone.style.cssText="position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;",element.parentNode.insertBefore(clone,element),width=clone.offsetWidth,clone.parentNode.removeChild(clone),width}function getElementWidthUsingCanvas(element,text){return context.font=element.css("font-size")+" "+element.css("font-family"),context.measureText(text).width}var grid,$container,context;return{init:init,destroy:destroy}}$.extend(!0,window,{Slick:{AutoColumnSize:AutoColumnSize}})}(jQuery);
//# sourceMappingURL=slick.autosizecolumn.js.map
